{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h3>Godown List</h3>

  {% if role == 'admin' %}
  <a href="{{ url_for('add_godown') }}" class="btn btn-success mb-3">+ Add Godown</a>
  {% endif %}

  <table class="table table-bordered">
    <thead class="table-success">
      <tr>
        <th>ID</th>
        <th>Godown Name</th>
        <th>Contact</th>
        {% if role == 'admin' %}
        <th>Actions</th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
      {% for g in godowns %}
      <tr>
        <td>{{ g.id }}</td>
        <td>{{ g.name or g.location }}</td>
        <td>{{ g.contact if g.contact else '-' }}</td>
        {% if role == 'admin' %}
        <td>
          <a href="{{ url_for('edit_godown', id=g.id) }}" class="btn btn-sm btn-primary">Edit</a>
          <form action="{{ url_for('delete_godown', id=g.id) }}" method="POST" style="display:inline;">
            <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this godown?');">Delete</button>
          </form>
        </td>
        {% endif %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}